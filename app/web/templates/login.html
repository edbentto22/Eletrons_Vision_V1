<!DOCTYPE html>
<html lang="pt-BR" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ app_name }} — Login</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { inter: ['Inter','ui-sans-serif','system-ui'] },
          colors: {
            border: { DEFAULT: 'hsl(214, 14%, 89%)' },
            input: { DEFAULT: 'hsl(214, 14%, 89%)' },
            ring: { DEFAULT: 'hsl(213, 94%, 68%)' },
            background: { DEFAULT: 'hsl(0, 0%, 100%)' },
            foreground: { DEFAULT: 'hsl(222.2, 47.4%, 11.2%)' },
            primary: { DEFAULT: '#2563eb', foreground: '#fff' },
            muted: { DEFAULT: 'hsl(210, 40%, 96%)', foreground: 'hsl(215, 16%, 46%)' },
            destructive: { DEFAULT: 'hsl(0, 84%, 60%)', foreground: '#fff' },
          }
        }
      }
    }
  </script>
  <style>
    :root{
      --radius: 0.75rem;
    }
    .card{ @apply bg-background text-foreground border border-border rounded-[var(--radius)] shadow-sm; }
    .btn{ @apply inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:opacity-50 disabled:pointer-events-none h-10 px-4 py-2; }
    .btn-primary{ @apply bg-primary text-white hover:bg-blue-600 focus-visible:ring-blue-600; }
    .input{ @apply flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm outline-none ring-offset-0 focus:ring-2 focus:ring-ring focus:border-transparent placeholder:text-gray-400; }
    .label{ @apply text-sm font-medium text-gray-700; }
    .muted{ @apply text-sm text-gray-500; }
    .alert-error{ @apply rounded-md border border-red-200 bg-red-50 text-red-700 text-sm px-3 py-2; }
    .switch{ @apply relative inline-flex h-6 w-11 items-center rounded-full bg-gray-300 transition; }
    .switch-dot{ @apply inline-block h-5 w-5 transform rounded-full bg-white transition; }
    html.dark body{ @apply bg-neutral-950 text-neutral-50; }
    html.dark .card{ @apply bg-neutral-900 border-neutral-800 text-neutral-50; }
    html.dark .input{ @apply bg-neutral-900 border-neutral-800 text-neutral-50 placeholder:text-neutral-500; }
    html.dark .label{ @apply text-neutral-200; }
    html.dark .muted{ @apply text-neutral-400; }
  </style>
  <script>
    // Tema: persistência em localStorage e toggle
    (function(){
      const saved = localStorage.getItem('ev_theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (saved === 'dark' || (!saved && prefersDark)) document.documentElement.classList.add('dark');
    })();
    function toggleTheme(){
      const el = document.documentElement;
      const isDark = el.classList.toggle('dark');
      localStorage.setItem('ev_theme', isDark ? 'dark' : 'light');
      const knob = document.getElementById('theme-dot');
      if (knob) knob.style.transform = isDark ? 'translateX(20px)' : 'translateX(0)';
    }
  </script>
  <link rel="icon" href="/static/ev_icon.svg" type="image/svg+xml" />

<body class="min-h-screen font-inter bg-[radial-gradient(1200px_600px_at_50%_-10%,rgba(56,189,248,0.15),transparent),radial-gradient(800px_400px_at_80%_20%,rgba(99,102,241,0.12),transparent)]">
  <div class="min-h-screen flex flex-col">
    <!-- Top bar -->
    

    <!-- Center -->
    <main class="flex-1 flex items-center justify-center px-4">
      <div class="w-full max-w-md">
        <div class="card p-6">
          <div class="mb-6 text-center">
          <img src="/static/ev_logo.svg" alt="{{ app_name }} logo" class="mx-auto h-25 w-auto mb-3" />
          <h1 class="text-2xl font-semibold tracking-tight">Bem-vindo</h1>
          <p class="muted">Acesse com suas credenciais</p>
          {% if error %}
            <div class="mt-3 alert-error">{{ error }}</div>
          {% endif %}
        </div>
          <form method="post" action="/login" class="space-y-4">
            <input type="hidden" name="csrf_token" id="csrf_token" />
            <script>
              (function(){
                const m = document.cookie.match(/(?:^|; )ev_csrf=([^;]+)/);
                if (m) document.getElementById('csrf_token').value = decodeURIComponent(m[1]);
              })();
            </script>
            <div class="grid grid-cols-[100px_1fr] items-center gap-3">
              <label for="email" class="label m-0">E-mail</label>
              <input id="email" name="email" type="email" required autocomplete="username" class="input" placeholder="Seu e-mail" />
            </div>
            <div class="grid grid-cols-[100px_1fr] items-center gap-3">
              <label for="password" class="label m-0">Senha</label>
              <div class="relative">
                <input id="password" name="password" type="password" required autocomplete="current-password" class="input pr-12" placeholder="••••••••" />
                <button type="button" aria-label="Mostrar senha" onclick="const p=document.getElementById('password'); p.type=p.type==='password'?'text':'password'" class="absolute inset-y-0 right-2 my-auto text-xs text-gray-500 hover:text-gray-700">ver</button>
              </div>
            </div>
            <button type="submit" class="btn btn-primary w-full h-11">Entrar</button>
          </form>
        </div>
        <p class="mt-6 text-center text-xs muted">Protegido por autenticação — {{ app_name }}</p>
      </div>
    </main>
  </div>
  <script>
    // Ajustar posição do dot do switch conforme tema atual
    (function(){
      const isDark = document.documentElement.classList.contains('dark');
      const knob = document.getElementById('theme-dot');
      if (knob) knob.style.transform = isDark ? 'translateX(20px)' : 'translateX(0)';
    })();
  </script>
</body>
</html>